// ================= ğŸš€ é…ç½®åŒºåŸŸ ğŸš€ =================
// æ‚¨çš„é»˜è®¤æ•°æ®ï¼Œå¦‚æœKVä¸­æ²¡æœ‰å†…å®¹ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤æ•°æ®
const DEFAULT_DATA = [
  {
    name: "ç¤ºä¾‹åˆ†ç±»",
    icon: "ğŸš€",
    links: [{ name: "Google", url: "https://google.com", desc: "å¼ºå¤§çš„æœç´¢å¼•æ“" }]
  }
];

// ================= âš™ï¸ Worker åç«¯é€»è¾‘ âš™ï¸ =================
export default {
  async fetch(request, env) {
    const url = new URL(request.url);
    const headers = {
        'Content-Type': 'application/json',
        'Access-Control-Allow-Origin': '*'
    };

    // 1. è·å–æ•°æ® (GET)
    if (url.pathname === '/api/data' && request.method === 'GET') {
      try {
        let data = await env.NAV_KV.get('nav_data');
        return new Response(data || JSON.stringify(DEFAULT_DATA), { headers });
      } catch (e) {
        return new Response(JSON.stringify(DEFAULT_DATA), { headers });
      }
    }

    // 2. ç™»å½•éªŒè¯ (POST)
    if (url.pathname === '/api/login' && request.method === 'POST') {
      try {
        const { password } = await request.json();
        if (password === env.ADMIN_PASSWORD) {
           return new Response(JSON.stringify({ success: true }), { headers });
        } else {
           return new Response(JSON.stringify({ success: false }), { status: 401, headers });
        }
      } catch (e) {
        return new Response(JSON.stringify({ success: false }), { status: 500, headers });
      }
    }

    // 3. ä¿å­˜æ•°æ® (POST)
    if (url.pathname === '/api/data' && request.method === 'POST') {
      try {
        const reqBody = await request.json();
        if (reqBody.password !== env.ADMIN_PASSWORD) {
          return new Response(JSON.stringify({ success: false, message: "å¯†ç é”™è¯¯" }), {
            status: 401, headers
          });
        }
        await env.NAV_KV.put('nav_data', JSON.stringify(reqBody.data));
        return new Response(JSON.stringify({ success: true }), { headers });
      } catch (e) {
        return new Response(JSON.stringify({ success: false, message: e.message }), { status: 500, headers });
      }
    }

    // 4. è¿”å› HTML
    return new Response(HTML_CONTENT, {
      headers: { 'Content-Type': 'text/html;charset=UTF-8' },
    });
  },
};


// ================= ğŸ¨ å‰ç«¯é¡µé¢ä»£ç  ğŸ¨ =================
const HTML_CONTENT = `
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŒ äº‘ç«¯å¯¼èˆª</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>ğŸŒŒ</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ğŸ¨ --- å˜é‡ä¸åŸºç¡€æ ·å¼ --- ğŸ¨ */
        :root {
            --text-color: #333;
            --header-text: #fff;
            --card-bg: rgba(255, 255, 255, 0.7);
            --card-border: rgba(255, 255, 255, 0.9);
            --card-shadow: rgba(0,0,0,0.05);
            --card-hover-shadow: rgba(9, 30, 66, 0.15);
            --glass-bg: rgba(255, 255, 255, 0.2);
            --glass-border: rgba(255, 255, 255, 0.3);
            --glass-hover-bg: rgba(255, 255, 255, 0.4);
            --link-bg: rgba(255, 255, 255, 0.5);
            --link-hover-text: #fff;
            --link-hover-bg: linear-gradient(45deg, #6a82fb, #fc5c7d);
            --input-bg: rgba(255, 255, 255, 0.9);
            --modal-bg: #fff;
            --font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Microsoft YaHei', sans-serif;
        }

        [data-theme="dark"] {
            --text-color: #e0e0e0;
            --header-text: #f0f0f0;
            --card-bg: rgba(25, 28, 34, 0.7);
            --card-border: rgba(255, 255, 255, 0.1);
            --card-shadow: rgba(0,0,0,0.2);
            --card-hover-shadow: rgba(0, 0, 0, 0.4);
            --glass-bg: rgba(0, 0, 0, 0.2);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-hover-bg: rgba(0, 0, 0, 0.4);
            --link-bg: rgba(44, 48, 56, 0.8);
            --link-hover-text: #fff;
            --link-hover-bg: linear-gradient(45deg, #8A2387, #E94057, #F27121);
            --input-bg: rgba(44, 48, 56, 1);
            --modal-bg: #1f232a;
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-family);
            color: var(--text-color);
            background-color: #1e2024; /* å¤‡ç”¨èƒŒæ™¯è‰² */
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* ğŸŒŒ --- åŠ¨æ€æå…‰èƒŒæ™¯ --- ğŸŒŒ */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1;
            background: radial-gradient(circle, rgba(255,92,125,0.2) 0%, rgba(106,130,251,0.2) 100%);
            animation: aurora 20s infinite linear;
        }

        [data-theme="dark"] body::before {
            background: radial-gradient(circle, rgba(138,35,135,0.3) 0%, rgba(233,64,87,0.3) 35%, rgba(242,113,33,0.3) 100%);
        }

        @keyframes aurora {
            0% { transform: rotate(0deg) scale(1.5); }
            50% { transform: rotate(180deg) scale(2); }
            100% { transform: rotate(360deg) scale(1.5); }
        }

        /* ğŸ™ï¸ --- ä¸»ä½“å¸ƒå±€ --- ğŸ™ï¸ */
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 40px 20px;
            height: 100vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch; /* ç§»åŠ¨ç«¯å¹³æ»‘æ»šåŠ¨ */
        }
        
        /* éšè—æ»šåŠ¨æ¡ */
        .container::-webkit-scrollbar { display: none; }
        .container { -ms-overflow-style: none; scrollbar-width: none; }


        header { text-align: center; margin-bottom: 40px; color: var(--header-text); }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        
        /* ğŸ” --- æœç´¢ä¸å¤´éƒ¨ --- ğŸ” */
        .glass-btn {
            background: var(--glass-bg); padding: 10px 20px; border-radius: 50px;
            backdrop-filter: blur(10px); color: var(--header-text); 
            cursor: pointer; border: 1px solid var(--glass-border); font-weight: 500;
            display: flex; align-items: center; gap: 8px; 
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .glass-btn:hover { background: var(--glass-hover-bg); transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        .search-container { margin-bottom: 40px; }
        .search-input { 
            width: 100%; max-width: 500px; padding: 15px 30px; 
            border-radius: 50px; border: none; outline: none; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); font-size: 16px; 
            background: var(--input-bg); color: var(--text-color);
            transition: all 0.3s ease;
        }
        .search-input:focus { box-shadow: 0 10px 40px var(--card-hover-shadow), 0 0 0 4px rgba(106, 130, 251, 0.5); }

        /* ğŸ—‚ï¸ --- åˆ†ç±»ä¸é“¾æ¥ --- ğŸ—‚ï¸ */
        .categories { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
        .category { 
            background: var(--card-bg); border-radius: 20px; padding: 25px; 
            transition: 0.4s ease; box-shadow: 0 8px 30px var(--card-shadow);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
        }
        .category:hover { transform: translateY(-8px); box-shadow: 0 20px 40px var(--card-hover-shadow); }
        
        .category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--glass-border); padding-bottom: 15px; }
        .category-title { font-size: 1.4em; font-weight: 700; color: var(--text-color); }

        .links { display: grid; gap: 12px; }
        .link-item { 
            display: flex; align-items: center; padding: 12px; 
            background: var(--link-bg); border-radius: 12px; 
            text-decoration: none; color: var(--text-color); 
            transition: 0.3s ease; position: relative;
            overflow: hidden;
        }
        .link-item:hover { 
            background: var(--link-hover-bg);
            color: var(--link-hover-text); 
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .link-item:hover .link-desc { color: var(--link-hover-text); opacity: 0.8; }
        
        .link-content { flex: 1; }
        .link-name { font-weight: 700; }
        .link-desc { font-size: 0.85em; opacity: 0.7; margin-top: 4px; transition: color 0.3s ease; }

        /* ğŸ”’ --- ç®¡ç†é¢æ¿ä¸æ¨¡æ€æ¡† --- ğŸ”’ */
        .admin-panel { background: var(--card-bg); backdrop-filter: blur(10px); padding: 15px 25px; border-radius: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 1px solid var(--card-border); }
        .hidden { display: none !important; }

        .btn-mini { padding: 5px 10px; font-size: 13px; border-radius: 8px; border: none; cursor: pointer; margin-left: 5px; opacity: 0.9; transition: all 0.2s ease; font-weight: 500; }
        .btn-mini:hover { opacity: 1; transform: scale(1.05); }
        .btn-del { background: #ff5252; color: white; }
        .btn-add { background: #44e08c; color: #006432; width: 100%; margin-top: 10px; padding: 10px; font-weight: bold; font-size: 14px; }
        .btn-action { padding: 8px 15px; }
        .btn-new-cat { background: #377dff; color: white; }
        .btn-logout { background: #7f8fa6; color: white; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(8px); justify-content: center; align-items: center; z-index: 999; }
        .modal.show { display: flex; animation: fadeIn 0.3s ease; }
        .modal-content { background: var(--modal-bg); padding: 40px; border-radius: 20px; width: 90%; max-width: 380px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.3); color: var(--text-color); animation: slideIn 0.4s ease; }
        .form-input { width: 100%; padding: 14px; margin: 15px 0; border: 1px solid var(--glass-border); border-radius: 10px; background: var(--input-bg); color: var(--text-color); font-size: 16px; }
        .btn-primary { width: 100%; padding: 14px; background: linear-gradient(45deg, #6a82fb, #fc5c7d); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(106, 130, 251, 0.4); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* ğŸ“± --- å“åº”å¼å¸ƒå±€ --- ğŸ“± */
        @media (max-width: 768px) {
            .header-top { flex-direction: column; gap: 15px; }
            .top-btn-group { width: 100%; justify-content: space-around; }
            .glass-btn { flex-grow: 1; justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div class="glass-btn" style="cursor: default;" id="timeDisplay">ğŸ“… åŠ è½½ä¸­...</div>
                <div class="top-btn-group">
                    <button class="glass-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ</button>
                    <button class="glass-btn" id="loginBtn" onclick="toggleLogin()">ğŸ” ç®¡ç†å‘˜</button>
                </div>
            </div>
            
            <h1 style="text-shadow: 2px 2px 8px rgba(0,0,0,0.2); font-size: 2.8em; font-weight: 700;">ğŸŒŒ äº‘ç«¯å¯¼èˆª</h1>
            <p style="opacity:0.9; font-weight: 300;">æ‚¨çš„äº‘ç«¯ä¸ªäººé—¨æˆ·</p>
        </header>

        <div class="admin-panel hidden" id="adminPanel">
            <div>
                <strong>ğŸ‘‹ ç®¡ç†å‘˜æ¨¡å¼</strong> 
                <span id="statusMsg" style="margin-left:10px; font-size:14px; color:green"></span>
            </div>
            <div>
                <button class="btn-mini btn-action btn-new-cat" onclick="addCategory()">â• æ–°å»ºåˆ†ç±»</button>
                <button class="btn-mini btn-action btn-logout" onclick="logout()">é€€å‡º</button>
            </div>
        </div>

        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” æœç´¢ç½‘ç«™ã€å·¥å…·æˆ–æè¿°...">
        </div>

        <div class="categories" id="categoriesContainer">
            <div style="text-align:center; padding:50px; opacity:0.6;">â³ æ•°æ®åŠ è½½ä¸­...</div>
        </div>
        
        <footer style="text-align:center; padding:30px; opacity:0.6; font-size:12px; color: var(--text-color)">
            Â© 2024 Powered by Chenyun
        </footer>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2 style="margin-bottom:10px;">ç®¡ç†å‘˜è®¤è¯</h2>
            <p style="font-size:12px; opacity:0.7; margin-bottom:15px">è¯·è¾“å…¥ ADMIN_PASSWORD</p>
            <input type="password" id="passwordInput" class="form-input" placeholder="******">
            <button class="btn-primary" id="submitLoginBtn" onclick="handleLogin()">ç¡®è®¤ç™»å½•</button>
            <button style="margin-top:15px; background:none; border:none; color:inherit; opacity:0.6; cursor:pointer" onclick="toggleLogin()">å–æ¶ˆ</button>
        </div>
    </div>

    <script>
        // ================= ğŸ“œ å‰ç«¯è„šæœ¬é€»è¾‘ ğŸ“œ =================
        let navData = [];
        let isAdmin = false;
        let adminPassword = ""; 

        // 1. ä¸»é¢˜ç³»ç»Ÿ
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                applyTheme(savedTheme);
                return;
            }
            const hour = new Date().getHours();
            const isNight = hour >= 18 || hour < 6;
            applyTheme(isNight ? 'dark' : 'light');
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const target = current === 'dark' ? 'light' : 'dark';
            applyTheme(target);
            localStorage.setItem('theme', target);
        }

        function applyTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeBtn').textContent = 'ğŸŒ™';
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                document.getElementById('themeBtn').textContent = 'ğŸŒ';
            }
        }

        // 2. æ•°æ®ä¸äº¤äº’
        async function fetchData() {
            try {
                const res = await fetch('/api/data');
                navData = await res.json();
                render();
            } catch (e) {
                console.error(e);
                alert("æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–WorkerçŠ¶æ€ã€‚");
            }
        }

        async function saveData() {
            const msg = document.getElementById('statusMsg');
            msg.textContent = "æ­£åœ¨åŒæ­¥...";
            msg.style.color = '#377dff';
            try {
                const res = await fetch('/api/data', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: adminPassword, data: navData })
                });
                const result = await res.json();
                if (result.success) {
                    msg.textContent = "âœ… ä¿å­˜æˆåŠŸ";
                    msg.style.color = '#44e08c';
                    setTimeout(() => msg.textContent = "", 2000);
                    render();
                } else {
                    throw new Error(result.message || "ä¿å­˜å¤±è´¥");
                }
            } catch (e) {
                msg.textContent = 'âŒ ' + e.message;
                msg.style.color = '#ff5252';
                if(e.message.includes("å¯†ç ")) alert("èº«ä»½éªŒè¯å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•ï¼");
            }
        }

        // 3. ç™»å½•é€»è¾‘
        function toggleLogin() {
            const modal = document.getElementById('loginModal');
            modal.classList.toggle('show');
            if (modal.classList.contains('show')) {
                document.getElementById('passwordInput').focus();
            }
            document.getElementById('passwordInput').value = '';
        }

        async function handleLogin() {
            const pwd = document.getElementById('passwordInput').value;
            const btn = document.getElementById('submitLoginBtn');
            if (!pwd) {
              alert("å¯†ç ä¸èƒ½ä¸ºç©º");
              return;
            }
            btn.textContent = "éªŒè¯ä¸­...";
            btn.disabled = true;

            try {
                const res = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: pwd })
                });
                if (!res.ok) throw new Error("å¯†ç é”™è¯¯");
                const result = await res.json();
                if (result.success) {
                    adminPassword = pwd;
                    isAdmin = true;
                    document.getElementById('adminPanel').classList.remove('hidden');
                    document.getElementById('loginBtn').classList.add('hidden');
                    toggleLogin();
                    render();
                } else {
                    throw new Error("å¯†ç é”™è¯¯");
                }
            } catch (e) {
                alert('âŒ ç™»å½•å¤±è´¥: ' + e.message);
            } finally {
                btn.textContent = "ç¡®è®¤ç™»å½•";
                btn.disabled = false;
            }
        }

        function logout() {
            isAdmin = false;
            adminPassword = "";
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('loginBtn').classList.remove('hidden');
            render();
        }

        // 4. æ¸²æŸ“ä¸DOMæ“ä½œ
        function render() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';
            if (!navData || navData.length === 0) {
              container.innerHTML = '<div style="text-align:center; padding:50px; opacity:0.6;">æ²¡æœ‰æ•°æ®ï¼Œè¯·å…ˆç™»å½•å¹¶æ·»åŠ åˆ†ç±»ã€‚</div>';
              return;
            }
            navData.forEach(function(cat, i) {
                var linksHtml = cat.links.map(function(link, j) {
                    var adminButton = isAdmin ? '<button class="btn-mini btn-del" onclick="event.preventDefault(); delLink(' + i + ',' + j + ')">Ã—</button>' : '';
                    return (
                        '<a href="' + link.url + '" target="_blank" class="link-item" data-search="' + link.name + ' ' + link.desc + '">' +
                            '<div class="link-content">' +
                                '<span class="link-name">' + link.name + '</span>' +
                                '<span class="link-desc">' + link.desc + '</span>' +
                            '</div>' +
                            adminButton +
                        '</a>'
                    );
                }).join('');

                if (isAdmin) {
                    linksHtml += '<button class="btn-mini btn-add" onclick="addLink(' + i + ')">+ æ·»åŠ é“¾æ¥</button>';
                }
                
                var categoryAdminButton = isAdmin ? '<button class="btn-mini btn-del" onclick="delCat(' + i + ')">åˆ é™¤</button>' : '';
                container.innerHTML += (
                    '<div class="category">' +
                        '<div class="category-header">' +
                            '<div class="category-title">' + cat.icon + ' ' + cat.name + '</div>' +
                            categoryAdminButton +
                        '</div>' +
                        '<div class="links">' + linksHtml + '</div>' +
                    '</div>'
                );
            });
            filterLinks();
        }
        
        // 5. ç®¡ç†å‘˜æ“ä½œ
        function addCategory() {
            const name = prompt("è¯·è¾“å…¥åˆ†ç±»åç§°:"); 
            if(!name) return;
            const icon = prompt("è¯·è¾“å…¥åˆ†ç±»çš„ Emoji å›¾æ ‡:", "ğŸ“‚");
            navData.push({name: name, icon: icon || "ğŸ“‚", links:[]}); 
            saveData();
        }
        function delCat(i) { 
            if(confirm('ç¡®å®šè¦åˆ é™¤åˆ†ç±»ã€Œ' + navData[i].name + 'ã€å—ï¼Ÿ')) { 
                navData.splice(i,1); 
                saveData(); 
            } 
        }
        function addLink(i) {
            const name = prompt("è¯·è¾“å…¥é“¾æ¥åç§°:"); 
            if(!name) return;
            const url = prompt("è¯·è¾“å…¥ç½‘å€:", "https://");
            if(!url) return;
            const desc = prompt("è¯·è¾“å…¥é“¾æ¥æè¿°:");
            navData[i].links.push({name: name, url: url, desc: desc}); 
            saveData();
        }
        function delLink(i,j) { 
            if(confirm('ç¡®å®šè¦åˆ é™¤é“¾æ¥ã€Œ' + navData[i].links[j].name + 'ã€å—ï¼Ÿ')) { 
                navData[i].links.splice(j,1); 
                saveData(); 
            } 
        }

        // 6. æœç´¢è¿‡æ»¤
        document.getElementById('searchInput').addEventListener('input', filterLinks);
        function filterLinks() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.link-item').forEach(function(el) {
                const text = el.getAttribute('data-search').toLowerCase();
                el.style.display = text.includes(q) ? 'flex' : 'none';
            });
            document.querySelectorAll('.category').forEach(function(cat) {
                const hasVisible = cat.querySelector('.link-item[style="display: flex;"]');
                cat.style.display = (q === '' || hasVisible || isAdmin) ? 'block' : 'none';
            });
        }
        
        // 7. è¾…åŠ©å‡½æ•°ä¸åˆå§‹åŒ–
        function updateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const weeks = ["å‘¨æ—¥", "å‘¨ä¸€", "å‘¨äºŒ", "å‘¨ä¸‰", "å‘¨å››", "å‘¨äº”", "å‘¨å…­"];
            const week = weeks[now.getDay()];

            document.getElementById('timeDisplay').textContent = 
                year + 'å¹´' + month + 'æœˆ' + day + 'æ—¥ ' + week + ' ' + hours + ':' + minutes + ':' + seconds;
        }

        document.getElementById('passwordInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') handleLogin();
        });

        // --- ğŸš€ å¯åŠ¨ï¼ ---
        initTheme();
        fetchData();
        setInterval(updateTime, 1000);
        updateTime();
        
    </script>
</body>
</html>
`;
